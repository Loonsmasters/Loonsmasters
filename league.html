<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loons Masters - League Tables</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    .leaderboard {
      max-width: 1000px;
      margin: 2rem auto;
    }

    .leaderboard h2 {
      color: #c0392b;
      font-size: 1.75rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .leaderboard table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 3rem;
    }

    .leaderboard th, .leaderboard td {
      padding: 0.75rem;
      border: 1px solid #ccc;
      text-align: left;
    }

    .leaderboard th {
      background-color: #2c3e50;
      color: white;
    }

    .highlight {
      font-weight: bold;
      background-color: #eafaf1;
    }

    @media (max-width: 768px) {
      .leaderboard table, .leaderboard th, .leaderboard td {
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Loons Masters Invitational</h1>
    <p>üèÜ Hall of Fame & Hall of Shame Leaderboards</p>
  </header>

  <nav>
    <a href="index.html">Home</a>
    <a href="profiles.html">Profiles</a>
    <a href="scores.html">Scores</a>
    <a href="results.html">Results</a>
    <a href="league.html">League</a>
    <a href="photos.html">Photos</a>
    <a href="courses.html">Courses</a>
    <a href="trophies.html">Trophies</a>
    <a href="rules.html">Rules</a>
  </nav>

  <main class="leaderboard">
    <section>
      <h2>Hall of Fame üèÖ</h2>
      <table>
        <thead>
          <tr>
            <th>Player</th>
            <th>Masters</th>
            <th>Jesus</th>
            <th>Par 5</th>
            <th>Par 3</th>
            <th>Eiffel</th>
            <th>Man on Fire</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody id="fame-table">
          <!-- Filled dynamically -->
        </tbody>
      </table>
    </section>

    <section>
      <h2>Hall of Shame ü´£</h2>
      <table>
        <thead>
          <tr>
            <th>Player</th>
            <th>SIDNEY</th>
            <th>ATGNI</th>
            <th>Pink Tee</th>
            <th>Baxters</th>
            <th>Big Banana</th>
            <th>Le Choke</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody id="shame-table">
          <!-- Filled dynamically -->
        </tbody>
      </table>
    </section>
  </main>

  <footer>
    <p>&copy; 2001‚Äì2025 Loons Masters Invitational | League Records</p>
  </footer>

  <script>
    async function fetchResultsData() {
      const response = await fetch('trophies_by_year.json');
      return await response.json();
    }

    function buildLeaderboards(data, fameTrophies, shameTrophies) {
      const fameScores = {};
      const shameScores = {};

      for (const year in data) {
        const yearData = data[year];
        for (const trophy in yearData) {
          const winner = yearData[trophy];
          if (!winner) continue;

          const target = fameTrophies.includes(trophy) ? fameScores :
                         shameTrophies.includes(trophy) ? shameScores : null;

          if (target) {
            const names = winner.split(/,|&| and /).map(n => n.trim());
            names.forEach(name => {
              if (!target[name]) target[name] = {};
              if (!target[name][trophy]) target[name][trophy] = 0;
              target[name][trophy]++;
            });
          }
        }
      }

      return { fameScores, shameScores };
    }

    function renderTable(scores, trophies, containerId) {
      const container = document.getElementById(containerId);

      Object.entries(scores).forEach(([player, trophyCounts]) => {
        let total = 0;
        const row = [`<td>${player}</td>`];
        trophies.forEach(t => {
          const count = trophyCounts[t] || 0;
          total += count;
          row.push(`<td>${count}</td>`);
        });
        row.push(`<td>${total}</td>`);
        container.innerHTML += `<tr>${row.join('')}</tr>`;
      });
    }

    async function init() {
      const fameTrophies = [
        'Loons Masters Champion', 'Jesus is my coach', 'Par 5\'s',
        'Par 3\'s', 'Eiffel Tower', 'Man on Fire'
      ];
      const shameTrophies = [
        'The Lord Sidney Bikerstaff Trophy', 'All the Gear, No Idea',
        'The Pink Tee', 'Baxters', 'Big Banana', 'Le Choke',
        'The Bandit', 'The \u201cDavies Turd\u201d Trophy',
        'Sq Chop', 'Golf Mug', '4 warm piss largers!!', 'Golf Bag Bar', 'Mr Ed'
      ];

      const data = await fetchResultsData();
      const { fameScores, shameScores } = buildLeaderboards(data, fameTrophies, shameTrophies);

      renderTable(fameScores, fameTrophies, 'fame-table');
      renderTable(shameScores, shameTrophies, 'shame-table');
    }

    init();
  </script>
</body>
</html>
